apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: traefik2-auth-proxy
  namespace: admin
spec:
  values:
    loadBalancerIP: 10.50.79.251
    kubernetes:
      ingressEndpoint:
        ip: 20.90.254.226
---
apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: oauth-auth
  namespace: admin
spec:
  forwardAuth:
    # May need a new DNS record for this -- see ticket description
    address: https://cft-oauth-proxy-00.demo.platform.hmcts.net/oauth-proxy/auth_or_start