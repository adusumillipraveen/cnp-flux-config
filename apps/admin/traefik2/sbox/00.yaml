apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: traefik2
  namespace: admin
spec:
  releaseName: traefik
    values:
      deployment:
        additionalVolumes:
          - name: traefik-internal-cert
            csi:
              driver: secrets-store.csi.k8s.io
              readOnly: true
              volumeAttributes:
                secretProviderClass: traefik-internal-cert
      additionalVolumeMounts:
        - name: traefik-internal-cert
          mountPath: "/mnt/certs"
          readOnly: true
  values:
    service:
      spec:
        loadBalancerIP: "10.2.9.250"
