---
apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: neuvector
  namespace: neuvector
spec:
  values:
    neuvector:
      controller:
        azureFileShare:
          secretName: nv-storage-secret
          shareName: neuvector-data-01
        ingress:
          enabled: true
          host: neuvector01.service.core-compute-aat.internal
          path: "/api"
          annotations: 
            kubernetes.io/ingress.class: traefik-neuvector-api		
            ingress.kubernetes.io/rewrite-target: /
            ingress.kubernetes.io/protocol: https
        configmap:
          data:
            samlinitcfg.yaml: |
              SSO_URL: https://login.microsoftonline.com/531ff96d-0ae9-462a-8d2d-bec7c0b42082/saml2
              Issuer: https://sts.windows.net/531ff96d-0ae9-462a-8d2d-bec7c0b42082/
              X509_Cert: |
                -----BEGIN CERTIFICATE-----
                MIIJyTCCB7GgAwIBAgITewAC9OxGifj5FXOt3AAAAAL07DANBgkqhkiG9w0BAQsF
                ADCBizELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0b24xEDAOBgNVBAcT
                B1JlZG1vbmQxHjAcBgNVBAoTFU1pY3Jvc29mdCBDb3Jwb3JhdGlvbjEVMBMGA1UE
                CxMMTWljcm9zb2Z0IElUMR4wHAYDVQQDExVNaWNyb3NvZnQgSVQgVExTIENBIDEw
                HhcNMTgwOTI0MjEzNTI5WhcNMjAwOTI0MjEzNTI5WjArMSkwJwYDVQQDEyBzdGFt
                cDIubG9naW4ubWljcm9zb2Z0b25saW5lLmNvbTCCASIwDQYJKoZIhvcNAQEBBQAD
                ggEPADCCAQoCggEBAO5KVPCRYetYNN1OVNTMpmi6NV/yDwT1R2OkrqNJG4sS/gDN
                cttfKOByfFK+lXscK+UKts2wIfWSvy/Sat9baLgnBX5H7nr2w3xkQgSv8TdVK32b
                8GGar0CGX8KnvnyDHebMBI+aDwFVt8Cdc15o+3fUZkE8CJz2GYbXN8lYFgoCn2lh
                dGBVZ6ydmOAJBwX1auMXIKrrG8BYT57NsVzBJjIboYcluyr+mF/CRJ3i44GnJ/R2
                UX5QKYpti7mU84HMn1Aov9O/FlWnwNpijBpw6N4sDILH0+KLFLYtP/+ZoqY8lNGI
                UTaPqD2QWLzZNsrJsIZ06eZHvVY9emEQ9tPeCdcCAwEAAaOCBYMwggV/MIIB9gYK
                KwYBBAHWeQIEAgSCAeYEggHiAeAAdgC72d+8H4pxtZOUI5eqkntHOFeVCqtS6BqQ
                lmQ2jh7RhQAAAWYNi3l7AAAEAwBHMEUCIFyZ0wcoSq5Ue5MX/uo/LW9sG7KJJ9VK
                4Lj8kZfnohwTAiEA/S3Mk6ht+6HfwnBvzEYpVLtI5tGYTK4S8e/VRZYh8t4AdgBW
                FAaaL9fC7NP14b1Esj7HRna5vJkRXMDvlJhV1onQ3QAAAWYNi3fWAAAEAwBHMEUC
                IQDK4ZEasMEnGzaBzVhUqMeSzLokJz9jWjiDuZeXmowJmQIgVzeUplqyh3dU42IV
                x3bppl4PACpHftAVyqa407PAwFIAdgBep3P531bA57U2SH3QSeAyepGaDIShEhKE
                GHWWgXFFWAAAAWYNi3T+AAAEAwBHMEUCIQC3C2CumLwR/VKWws8vTwebUL965Ro7
                XJae4vpbobZjpgIgc5eIKQLIYyIuMEjuN0GSRhGLPwyi+SqcK6sa+u8JMLYAdgDw
                laRZ8gDRgkAQLS+TiI6tS/4dR+OZ4dA0prCoqo6ycwAAAWYNi3opAAAEAwBHMEUC
                IFMmEDzEmYN+sYg9MJJYf53zywQWsqwmVnQ7YaXLE5DeAiEAsIgg/NSeUJahoovz
                3KWK3m6MRTPdEYNqKZRXO9xl3oMwJwYJKwYBBAGCNxUKBBowGDAKBggrBgEFBQcD
                AjAKBggrBgEFBQcDATA+BgkrBgEEAYI3FQcEMTAvBicrBgEEAYI3FQiH2oZ1g+7Z
                AYLJhRuBtZ5hhfTrYIFdhNLfQoLnk3oCAWQCAR0wgYUGCCsGAQUFBwEBBHkwdzBR
                BggrBgEFBQcwAoZFaHR0cDovL3d3dy5taWNyb3NvZnQuY29tL3BraS9tc2NvcnAv
                TWljcm9zb2Z0JTIwSVQlMjBUTFMlMjBDQSUyMDEuY3J0MCIGCCsGAQUFBzABhhZo
                dHRwOi8vb2NzcC5tc29jc3AuY29tMB0GA1UdDgQWBBSD0cots0Syr4X2Tw+mwyYh
                FrdKHDALBgNVHQ8EBAMCBLAwggEmBgNVHREEggEdMIIBGYIZbG9naW4ubWljcm9z
                b2Z0b25saW5lLmNvbYIbbG9naW4ubWljcm9zb2Z0b25saW5lLXAuY29tghtsb2dp
                bmV4Lm1pY3Jvc29mdG9ubGluZS5jb22CGmxvZ2luMi5taWNyb3NvZnRvbmxpbmUu
                Y29tgiRzdGFtcDIubG9naW4ubWljcm9zb2Z0b25saW5lLWludC5jb22CHWxvZ2lu
                Lm1pY3Jvc29mdG9ubGluZS1pbnQuY29tgh9sb2dpbmV4Lm1pY3Jvc29mdG9ubGlu
                ZS1pbnQuY29tgh5sb2dpbjIubWljcm9zb2Z0b25saW5lLWludC5jb22CIHN0YW1w
                Mi5sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tMIGsBgNVHR8EgaQwgaEwgZ6ggZug
                gZiGS2h0dHA6Ly9tc2NybC5taWNyb3NvZnQuY29tL3BraS9tc2NvcnAvY3JsL01p
                Y3Jvc29mdCUyMElUJTIwVExTJTIwQ0ElMjAxLmNybIZJaHR0cDovL2NybC5taWNy
                b3NvZnQuY29tL3BraS9tc2NvcnAvY3JsL01pY3Jvc29mdCUyMElUJTIwVExTJTIw
                Q0ElMjAxLmNybDBNBgNVHSAERjBEMEIGCSsGAQQBgjcqATA1MDMGCCsGAQUFBwIB
                FidodHRwOi8vd3d3Lm1pY3Jvc29mdC5jb20vcGtpL21zY29ycC9jcHMwHwYDVR0j
                BBgwFoAUWIif1tycSCK3FD7/hIjo5oX/+n0wHQYDVR0lBBYwFAYIKwYBBQUHAwIG
                CCsGAQUFBwMBMA0GCSqGSIb3DQEBCwUAA4ICAQBsMoj40S9wlmLWiLhDWy2fuBEA
                V+a0x6WvfHP5EgkWIhrrY3fnIdX8FMLlJPMLxem1bX5+S1hqW28JvXkXY626riyT
                u3NIl7xoqdYRzJUO0gUsZNLp2jg6Amc8SXIe0lNL5mgDGnoTbhXwBXfYm87fd9Ua
                1mRmDfBKICQPgh3xxvR1C5b3V9ZAJmifoehV6q60XVhqMhvLDayfX1fGUooQgFus
                bBiT82COlU8CiWl8f2PyE1pdBLauidCrVQtIuapJDwNiK+cTsIV3sFmsVuhUC+sv
                w7TWt+LwnOClnTPZGKAHqILpDIW7cR+aTn83/dY0IHBQQNnl3Y/YrEY/6oA5vyJF
                2LhP/meeR1V0nnBAZhzk3mlR0aEbicIgxtnML+Ptj/7BemqB/tqExCDF288cjpHB
                mXZkzEmrei1DAw4OkfDBJ0Q+2cO6VcKKTNnhZQYN2BeEKN0yPElB91CLVGI65w4G
                cNP4pGJthSl6KnaOIzljUfaG9Sk8pAhXE1WkA9PocKiK19lFf9eUYjtN+Gw28xLa
                JbBzggu+sX4R/kA1I6wZgFIQYLDPrxx0knpoAhTHS7uNiCDhVZItmQDo4bD1/JEx
                sHHqhLgTSyzUkmKkiSNln9WBI4xyKp4UZNy42tZ7HkKTFXq8INZjgeWKH8ZSBoYY
                cj5Mtidn07Wq4OwvRQ==
                -----END CERTIFICATE-----
              Enable: true
              Default_Role: reader
              Role_Groups:
                admin:
                  - 300e771f-856c-45cc-b899-40d78281e9c1 
                  - c36eaede-a0ae-4967-8fed-0a02960b1370
            sysinitcfg.yaml: |
              New_Service_Policy_Mode: Discover
              Syslog_ip: fluentbit-log
              Syslog_IP_Proto: 6
              Syslog_Port: 5140
              Syslog_Level: Warning
              Syslog_status: true
              Syslog_Categories:
                - event
                - security-event
                - audit
              Cluster_Name: aat01
      manager:
        ingress:
          host: neuvector01.service.core-compute-aat.internal
          enabled: true
          annotations:		
            kubernetes.io/ingress.class: traefik-neuvector-api
